
<!DOCTYPE HTML>
<html lang="zh-cn" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>1.1 顶点和片段着色器 举例 · ShaderLab 开发实战</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="12-shader-语义（semantics）.html" />
    
    
    <link rel="prev" href="第2章-顶点和片段着色器.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="1.0 ShaderLab 框架.html">
            
                <a href="1.0 ShaderLab 框架.html">
            
                    
                    1. ShaderLab 框架
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="第1章-shaderlab-语法.html">
            
                <a href="第1章-shaderlab-语法.html">
            
                    
                    第1章 ShaderLab 语法
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="11-属性（properties）.html">
            
                <a href="11-属性（properties）.html">
            
                    
                    1.1 属性（Properties）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="12-子着色器（subshader）.html">
            
                <a href="12-子着色器（subshader）.html">
            
                    
                    1.2 子着色器（SubShader）
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.2.1" data-path="121-pass.html">
            
                <a href="121-pass.html">
            
                    
                    1.2.1 Pass
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.2.1.1" data-path="1211-culling--depth-testing.html">
            
                <a href="1211-culling--depth-testing.html">
            
                    
                    1.2.1.1 Culling & Depth Testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.1.2" data-path="1212-blending.html">
            
                <a href="1212-blending.html">
            
                    
                    1.2.1.2 Blending
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.1.3" data-path="1213-pass-tags.html">
            
                <a href="1213-pass-tags.html">
            
                    
                    1.2.1.3 Pass Tags
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.1.4" data-path="1214-stencil.html">
            
                <a href="1214-stencil.html">
            
                    
                    1.2.1.4 Stencil
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.1.5" data-path="1215-name.html">
            
                <a href="1215-name.html">
            
                    
                    1.2.1.5 Name
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.1.6" data-path="1216-legacy-lightiing.html">
            
                <a href="1216-legacy-lightiing.html">
            
                    
                    1.2.1.6 Legacy Lightiing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.1.7" data-path="1217-legacy-texture-combiners.html">
            
                <a href="1217-legacy-texture-combiners.html">
            
                    
                    1.2.1.7 Legacy Texture Combiners
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.1.8" data-path="1218-legacy-alpha-testing.html">
            
                <a href="1218-legacy-alpha-testing.html">
            
                    
                    1.2.1.8 Legacy Alpha Testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.1.9" data-path="1219-legacy-fog.html">
            
                <a href="1219-legacy-fog.html">
            
                    
                    1.2.1.9 Legacy Fog
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.1.10" data-path="12110-legacy-bindchannels.html">
            
                <a href="12110-legacy-bindchannels.html">
            
                    
                    1.2.1.10 Legacy BindChannels
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.2" data-path="122-usepass.html">
            
                <a href="122-usepass.html">
            
                    
                    1.2.2 UsePass
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.3" data-path="123-grabpass.html">
            
                <a href="123-grabpass.html">
            
                    
                    1.2.3 GrabPass
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.4" data-path="124-subshader-tags.html">
            
                <a href="124-subshader-tags.html">
            
                    
                    1.2.4 SubShader Tags
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.1.3" data-path="13-回滚语句（fallback）.html">
            
                <a href="13-回滚语句（fallback）.html">
            
                    
                    1.3 回滚语句（Fallback）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.4" data-path="14-自定义编译器（customeditor）.html">
            
                <a href="14-自定义编译器（customeditor）.html">
            
                    
                    1.4 自定义编译器（CustomEditor）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.5" data-path="15-其他命令（other-commands）.html">
            
                <a href="15-其他命令（other-commands）.html">
            
                    
                    1.5 其他命令（other commands）
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="第2章-顶点和片段着色器.html">
            
                <a href="第2章-顶点和片段着色器.html">
            
                    
                    第2章 顶点和片段着色器
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.2.2.1" data-path="11-顶点和片段着色器-举例.html">
            
                <a href="11-顶点和片段着色器-举例.html">
            
                    
                    1.1 顶点和片段着色器 举例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2" data-path="12-shader-语义（semantics）.html">
            
                <a href="12-shader-语义（semantics）.html">
            
                    
                    1.2 着色器语义
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.3" data-path="13-在-cghlsl-中访问-shader-属性.html">
            
                <a href="13-在-cghlsl-中访问-shader-属性.html">
            
                    
                    1.3 在 Cg\/HLSL 中访问着色器属性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.4" data-path="14-为顶点程序提供顶点数据.html">
            
                <a href="14-为顶点程序提供顶点数据.html">
            
                    
                    1.4 为顶点程序提供顶点数据
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.5" data-path="15-内置-shader-包含的文件.html">
            
                <a href="15-内置-shader-包含的文件.html">
            
                    
                    1.5 内置 Shader 包含的文件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.6" data-path="16-预定义着色器预处理宏.html">
            
                <a href="16-预定义着色器预处理宏.html">
            
                    
                    1.6 预定义着色器预处理宏
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.7" data-path="17-内置的辅助功能.html">
            
                <a href="17-内置的辅助功能.html">
            
                    
                    1.7 内置的辅助功能
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.8" data-path="18-内置的着色器变量.html">
            
                <a href="18-内置的着色器变量.html">
            
                    
                    1.8 内置的着色器变量
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.9" data-path="19-制作多个着色程序变体.html">
            
                <a href="19-制作多个着色程序变体.html">
            
                    
                    1.9 制作多个着色程序变体
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.10" data-path="110-glsl-着色器程序.html">
            
                <a href="110-glsl-着色器程序.html">
            
                    
                    1.10 GLSL 着色器程序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.11" data-path="111-unity-中使用的着色器语言.html">
            
                <a href="111-unity-中使用的着色器语言.html">
            
                    
                    1.11 Unity 中使用的着色器语言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.12" data-path="112-着色器编译目标级别.html">
            
                <a href="112-着色器编译目标级别.html">
            
                    
                    1.12 着色器编译目标级别
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.13" data-path="113-着色器数据类型和精度.html">
            
                <a href="113-着色器数据类型和精度.html">
            
                    
                    1.13 着色器数据类型和精度
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="第3章-表面着色器.html">
            
                <a href="第3章-表面着色器.html">
            
                    
                    第3章 表面着色器
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.3.1" data-path="11-表面着色器举例.html">
            
                <a href="11-表面着色器举例.html">
            
                    
                    1.1 表面着色器举例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.2" data-path="12-自定义光照模型的表面着色器.html">
            
                <a href="12-自定义光照模型的表面着色器.html">
            
                    
                    1.2 自定义光照模型的表面着色器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.3" data-path="13-使用dx11opengl-的表面着色器的细分网格.html">
            
                <a href="13-使用dx11opengl-的表面着色器的细分网格.html">
            
                    
                    1.3 使用DX11\/OpenGL 的表面着色器的细分网格
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="第4章-高级-shaderlab-主题.html">
            
                <a href="第4章-高级-shaderlab-主题.html">
            
                    
                    第4章 高级 ShaderLab 主题
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.4.1" data-path="11-unity-的渲染管线.html">
            
                <a href="11-unity-的渲染管线.html">
            
                    
                    1.1 Unity 的渲染管线
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.2" data-path="12-书写着色器的性能提示.html">
            
                <a href="12-书写着色器的性能提示.html">
            
                    
                    1.2 书写着色器的性能提示
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.3" data-path="13-使用替换的着色器渲染.html">
            
                <a href="13-使用替换的着色器渲染.html">
            
                    
                    1.3 使用替换的着色器渲染
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.4" data-path="14-自定义着色器gui.html">
            
                <a href="14-自定义着色器gui.html">
            
                    
                    1.4 自定义着色器GUI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.5" data-path="15-使用深度图.html">
            
                <a href="15-使用深度图.html">
            
                    
                    1.5 使用深度图
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.6" data-path="16-特定平台的渲染差异.html">
            
                <a href="16-特定平台的渲染差异.html">
            
                    
                    1.6 特定平台的渲染差异
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.7" data-path="17-着色器细节等级.html">
            
                <a href="17-着色器细节等级.html">
            
                    
                    1.7 着色器细节等级
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.8" data-path="18-纹理数组.html">
            
                <a href="18-纹理数组.html">
            
                    
                    1.8 纹理数组
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.9" data-path="19-使用-visual-studio-调试-directx11-着色器.html">
            
                <a href="19-使用-visual-studio-调试-directx11-着色器.html">
            
                    
                    1.9 使用 Visual Studio 调试 DirectX11 着色器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.10" data-path="110-固定功能着色器示例.html">
            
                <a href="110-固定功能着色器示例.html">
            
                    
                    1.10 固定功能着色器示例
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../2. Cg 语法/2.0 Cg 语法.html">
            
                <a href="../2. Cg 语法/2.0 Cg 语法.html">
            
                    
                    2. Cg 语法
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../2. Cg 语法/第1章-简介.html">
            
                <a href="../2. Cg 语法/第1章-简介.html">
            
                    
                    第1章 简介
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../2. Cg 语法/11-什么是-cg.html">
            
                <a href="../2. Cg 语法/11-什么是-cg.html">
            
                    
                    1.1 什么是 Cg
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="../2. Cg 语法/12-顶点、片段和图形流水线.html">
            
                <a href="../2. Cg 语法/12-顶点、片段和图形流水线.html">
            
                    
                    1.2 顶点、片段和图形流水线
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" >
            
                <span>
            
                    
                    第2章 最简单的程序
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" >
            
                <span>
            
                    
                    第3章 参数、纹理和表达式
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" >
            
                <span>
            
                    
                    第4章 变换
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" >
            
                <span>
            
                    
                    第5章 光照
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" >
            
                <span>
            
                    
                    第6章 动画
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" >
            
                <span>
            
                    
                    第7章 环境映射技术
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" >
            
                <span>
            
                    
                    第8章 凹凸映射
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9" >
            
                <span>
            
                    
                    第9章 高级论题
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.10" >
            
                <span>
            
                    
                    第10章 Profile 和性能
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../3. ShaderLab 开发实战/3.0 ShaderLab 开发实战.html">
            
                <a href="../3. ShaderLab 开发实战/3.0 ShaderLab 开发实战.html">
            
                    
                    3. ShaderLab 开发实战
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本書使用 GitBook 釋出
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >1.1 顶点和片段着色器 举例</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
                                <section class="normal markdown-section">
                                
                                <h2 id="vertex-and-fragment-shader-examples">Vertex and Fragment Shader Examples</h2>
<h4 id="&#x521B;&#x5EFA;&#x4E00;&#x4E2A;shader">&#x521B;&#x5EFA;&#x4E00;&#x4E2A;Shader</h4>
<pre><code class="lang-javascript">    Shader &quot;Custom/NewShader&quot; {
        Properties {
            _MainTex (&quot;Base (RGB)&quot;, 2D) = &quot;white&quot; {}
        }
        SubShader {
            Tags { &quot;RenderType&quot; = &quot;Opaque&quot; }
            LOD 200

            CGPROGRAM
            #pragma surface surf Lambert

            sampler2D _MainTex;

            struct Input {
                float2 uv_MainTex;
            };

            void surf (Input IN, inout SurfaceOutput o) {
                half4 c = tex2D (_MainTex, IN.uv_MainTex);
                o.Albedo = c.rgb;
                o.Alpha = c.a;
            }
            ENDCG
        }
        FallBack &quot;Diffuse&quot;
    }
</code></pre>
<h4 id="&#x7A7A;&#x7684;shader">&#x7A7A;&#x7684;Shader</h4>
<p>&#x4F60;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x5728;&#x4EE3;&#x7801;&#x4E2D;ShaderLab&#x6750;&#x8D28;&#x7684;&#x56DB;&#x4E2A;&#x4E3B;&#x8981;&#x90E8;&#x5206;&#x3002;</p>
<pre><code class="lang-javascript">
    Shader <span class="hljs-string">&quot;Custom/Empty&quot;</span> {
        SubShader {
            Pass {
                CGPROGRAM
                ENDCG
            }
        }
    }
</code></pre>
<h4 id="shader">Shader</h4>
<p>&#x7740;&#x8272;&#x5668;&#x547D;&#x4EE4;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x5B57;&#x7B26;&#x4E32;&#x4E0E;Shader&#x7684;&#x540D;&#x79F0;&#x3002;&#x8FD9;&#x4E2A;&#x540D;&#x5B57;&#x53EF;&#x4EE5;&#x7528;&#x201C;/&#x201D;&#x5B57;&#x7B26;&#x7EC6;&#x5206;&#x6A21;&#x62DF;&#x4E00;&#x4E2A;&#x6587;&#x4EF6;&#x5939;&#x7ED3;&#x6784;,&#x7B80;&#x5316;&#x672A;&#x6765;&#x7740;&#x8272;&#x5668;&#x7684;&#x4E8C;&#x6B21;&#x5229;&#x7528;&#x3002;&#x5728;&#x6240;&#x6709;&#x7740;&#x8272;&#x5668;&#x7684;&#x540D;&#x79F0;&#x5E94;&#x8BE5;&#x662F;&#x552F;&#x4E00;&#x7684;&#x3002;</p>
<h4 id="subshader">SubShader</h4>
<p>Shader&#x53EF;&#x4EE5;&#x5305;&#x542B;&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;SubShaders,&#x4E3B;&#x8981;&#x662F;&#x7528;&#x4E8E;&#x5B9E;&#x73B0;&#x7740;&#x8272;&#x5668;&#x5BF9;&#x4E0D;&#x540C;GPU&#x7684;&#x80FD;&#x529B;&#x3002;&#x6240;&#x6709;&#x5728;&#x573A;&#x7684;SubShaders&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x4E0D;&#x540C;&#x7684;&#x6280;&#x672F;&#x7C7B;&#x4F3C;&#x7684;&#x7ED3;&#x679C;&#x4E3A;&#x6BCF;&#x4E2A;&#x67B6;&#x6784;&#x3002;ShaderLab&#x7FFB;&#x8BD1;&#x7684;&#x4EE3;&#x7801;&#x7740;&#x8272;&#x5668;&#x81EA;&#x52A8;&#x5230;&#x5176;&#x4ED6;&#x67B6;&#x6784;,&#x4F46;&#x5728;&#x67D0;&#x4E9B;&#x60C5;&#x51B5;&#x4E0B;&#x5B8C;&#x5168;&#x7740;&#x8272;&#x5668;&#x7684;&#x529F;&#x80FD;&#x5728;&#x79FB;&#x52A8;&#x67B6;&#x6784;&#x4E0D;&#x7406;&#x60F3;&#x6216;&#x4E00;&#x4E9B;&#x8F93;&#x5165;&#x662F;&#x5931;&#x8E2A;,&#x4F60;&#x5C06;&#x4F7F;&#x7528;&#x4E00;&#x4E2A;&#x7B80;&#x5355;&#x7684;SubShader&#x5728;Shader&#x4E2D;&#x548C;&#x6267;&#x884C;&#x684C;&#x9762;&#x67B6;&#x6784;&#x5B9E;&#x73B0;&#x3002;</p>
<h4 id="pass">Pass</h4>
<p>&#x6BCF;&#x4E2A;SubShader&#x7531;passes,&#x548C;&#x6BCF;&#x4E2A;pass&#x4EE3;&#x8868;&#x9876;&#x70B9;&#x548C;&#x7247;&#x6BB5;&#x4EE3;&#x7801;&#x7684;&#x4E00;&#x4E2A;&#x6267;&#x884C;&#x540C;&#x4E00;&#x4E2A;&#x5BF9;&#x8C61;&#x5448;&#x73B0;&#x7684;&#x6750;&#x6599;&#x6750;&#x8D28;&#x3002;&#x4F60;&#x5E94;&#x8BE5;&#x5B9E;&#x73B0;&#x4F20;&#x9012;&#x7684;&#x6750;&#x8D28;&#x4E0E;&#x6700;&#x5C0F;&#x7684;&#x6570;&#x53EF;&#x80FD;&#x7531;&#x4E8E;&#x6027;&#x80FD;&#x7684;&#x539F;&#x56E0;&#x3002;</p>
<h4 id="cgprogram--endcg">CGPROGRAM .. ENDCG</h4>
<p>&#x8FD9;&#x4E9B;&#x6307;&#x4EE4;&#x5B9A;&#x4E49;&#x5728;ShaderLab&#x7740;&#x8272;&#x5668;&#x4F7F;&#x7528;&#x7684;&#x8BED;&#x8A00;&#x3002;Unity&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Cg&#x548C;GLSL&#x7684;&#x6750;&#x8D28;&#x8BED;&#x8A00;&#x3002;Cg&#x8BED;&#x8A00;&#x662F;&#x63A8;&#x8350;&#x7684;,&#x56E0;&#x4E3A;&#x51E0;&#x4E2A;&#x4F18;&#x5316;&#x6B65;&#x9AA4;&#x5B9E;&#x73B0;&#x4E0D;&#x540C;&#x7684;&#x4F53;&#x7CFB;&#x7ED3;&#x6784;&#x3002;</p>
<h4 id="&#x7B80;&#x5355;&#x7684;-shader">&#x7B80;&#x5355;&#x7684; Shader</h4>
<p>&#x9876;&#x70B9;&#x4E4B;&#x95F4;&#x7684;&#x533A;&#x522B;&#x548C;&#x7247;&#x6BB5;&#x7740;&#x8272;&#x5668;&#x662F;&#x4E00;&#x4E2A;&#x8FC7;&#x7A0B;&#x5F00;&#x53D1;&#x7684;&#x6E32;&#x67D3;&#x7BA1;&#x9053;&#x3002;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x4E3A;&#x7740;&#x8272;&#x5668;&#x7A0B;&#x5E8F;&#x4FEE;&#x6539;&#x573A;&#x666F;&#x7684;&#x51E0;&#x4F55;&#x5F62;&#x72B6;,&#x4F7F;3d&#x6295;&#x5F71;&#x3002;&#x76F8;&#x5173;&#x7247;&#x6BB5;&#x7740;&#x8272;&#x5668;&#x6E32;&#x67D3;&#x7A97;&#x53E3;,&#x5B9A;&#x4E49;&#x6BCF;&#x4E2A;&#x50CF;&#x7D20;&#x7684;&#x989C;&#x8272;&#x3002;&#x7247;&#x6BB5;&#x548C;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#x53EF;&#x4EE5;&#x63D0;&#x4F9B;&#x66F4;&#x591A;&#x7684;&#x529F;&#x80FD;&#x5728;&#x65B0;&#x7684;&#x663E;&#x5361;,&#x5982;&#x79FB;&#x52A8;&#x9876;&#x70B9;&#x4F4D;&#x7F6E;&#x4E3A;&#x6BCF;&#x4E2A;&#x50CF;&#x7D20;&#x6216;&#x5B58;&#x50A8;&#x66F4;&#x591A;&#x7684;&#x6570;&#x636E;&#x3002;</p>
<pre><code class="lang-javascript">Shader &quot;Custom/SolidColor&quot; {
    SubShader {
        Pass {
            CGPROGRAM

            #pragma vertex vert
            #pragma fragment frag

            float4 vert(float4 v:POSITION) : SV_POSITION {
                return mul (UNITY_MATRIX_MVP, v);
            }

            fixed4 frag() : SV_Target {
                return fixed4(1.0,0.0,0.0,1.0);
            }

            ENDCG
        }
    }
}
</code></pre>
<h4 id="pragma-vertex-vert">pragma vertex vert</h4>
<p>&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#x662F;&#x4E00;&#x4E2A;&#x7740;&#x8272;&#x5668;&#x7A0B;&#x5E8F;&#x4FEE;&#x6539;&#x573A;&#x666F;&#x7684;&#x51E0;&#x4F55;&#x5F62;&#x72B6;&#x3002;&#x5B83;&#x4E3A;&#x6BCF;&#x4E2A;&#x9876;&#x70B9;&#x5728;&#x73B0;&#x573A;&#x6267;&#x884C;,&#x548C;&#x8F93;&#x51FA;&#x7684;&#x5750;&#x6807;&#x6295;&#x5F71;,&#x989C;&#x8272;,&#x7EB9;&#x7406;&#x548C;&#x5176;&#x4ED6;&#x6570;&#x636E;&#x4F20;&#x9012;&#x5230;&#x7247;&#x6BB5;&#x7740;&#x8272;&#x5668;&#x3002;&#x8BE5;&#x6307;&#x4EE4;# pragma&#x9876;&#x70B9;(&#x51FD;&#x6570;&#x540D;)&#x662F;&#x7528;&#x4E8E;&#x5B9A;&#x4E49;&#x9876;&#x70B9;&#x51FD;&#x6570;&#x7684;&#x540D;&#x79F0;&#x3002;</p>
<h4 id="pragma-fragment-frag">pragma fragment frag</h4>
<p>&#x7247;&#x6BB5;&#x7740;&#x8272;&#x5668;&#x662F;&#x4E00;&#x4E2A;&#x7740;&#x8272;&#x5668;&#x7A0B;&#x5E8F;&#x4FEE;&#x6539;&#x6E32;&#x67D3;&#x56FE;&#x50CF;&#x5C5E;&#x6027;&#x7A97;&#x53E3;&#x3002;&#x662F;&#x6267;&#x884C;&#x7684;&#x6BCF;&#x4E2A;&#x50CF;&#x7D20;&#x548C;&#x8F93;&#x51FA;&#x4FE1;&#x606F;&#x7684;&#x50CF;&#x7D20;&#x7684;&#x989C;&#x8272;&#x662F;&#x7EA2;&#x8272;&#x7684;&#x3002;&#x8BE5;&#x6307;&#x4EE4;# pragma&#x7247;&#x6BB5;&#x5B9A;&#x4E49;&#x7684;&#x529F;&#x80FD;&#x7247;&#x6BB5;&#x7740;&#x8272;&#x5668;&#x7684;&#x540D;&#x79F0;&#x3002;</p>
<h4 id="float4-vertfloat4-vposition--svposition">float4 vert(float4 v:POSITION) : SV_POSITION</h4>
<p>&#x53D8;&#x91CF;v&#x5305;&#x542B;&#x9876;&#x70B9;&#x7684;&#x503C;,&#x8C03;&#x7528;&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x4E3A;&#x6BCF;&#x4E2A;&#x9876;&#x70B9;&#x7684;&#x573A;&#x666F;&#x5448;&#x73B0;&#x3002;&#x8FD4;&#x56DE;&#x503C;&#x662F;&#x4E00;&#x4E2A;float4&#x53D8;&#x91CF;&#x4E0E;&#x9876;&#x70B9;&#x7684;&#x4F4D;&#x7F6E;&#x5728;&#x5C4F;&#x5E55;&#x4E0A;,&#x4F7F;&#x7528;&#x56DB;&#x4E2A;&#x6D6E;&#x70B9;&#x503C;&#x5B58;&#x50A8;&#x5728;2d SV_POSITION coordinate&#x7A97;&#x53E3;&#x662F;&#x56E0;&#x4E3A;&#x9884;&#x8BA1;&#x7684;&#x51E0;&#x4F55;&#x6295;&#x5F71;&#x5728;&#x9F50;&#x6B21;&#x5750;&#x6807;&#x50CF;&#x7D20;&#x5728;&#x5C4F;&#x5E55;&#x4E0A;&#x4F7F;&#x7528;&#x4E24;&#x4E2A;&#x503C;(x,y),&#x4E00;&#x4E2A;&#x503C;&#x7684;&#x6DF1;&#x5EA6;(z)&#x548C;&#x4E00;&#x4E2A;&#x503C;(w)&#x7684;&#x9F50;&#x6B21;&#x7A7A;&#x95F4;&#x3002;&#x4F60;&#x53EF;&#x4EE5;&#x5C06;&#x9F50;&#x6B21;&#x5750;&#x6807;&#x8F6C;&#x6362;&#x4E3A;&#x4E09;&#x7EF4;&#x5750;&#x6807;,&#x4F46;&#x662F;&#x4F60;&#x4F1A;&#x5931;&#x53BB;&#x83B7;&#x5F97;&#x672A;&#x6765;3 d&#x9876;&#x70B9;&#x7684;&#x4F4D;&#x7F6E;,&#x4E5F;&#x53EF;&#x4EE5;&#x5220;&#x9664;z&#x503C;,&#x4F46;&#x4F60;&#x4F1A;&#x5931;&#x53BB;&#x6267;&#x884C;&#x6DF1;&#x5EA6;&#x6D4B;&#x8BD5;&#x7684;&#x80FD;&#x529B;&#x5728;&#x6700;&#x540E;&#x7684;&#x6E32;&#x67D3;&#x3002;&#x9F50;&#x6B21;&#x5750;&#x6807;&#x7528;&#x4E8E;&#x51E0;&#x4E4E;&#x6240;&#x6709;&#x7684;gpu&#x3002;</p>
<p>&#x6D88;&#x9664;&#x53D8;&#x91CF;&#x7684;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#x8F93;&#x51FA;&#x7740;&#x8272;&#x5668;&#x4E0D;&#x4EE3;&#x8868;&#x4EFB;&#x4F55;&#x4EE3;&#x7801;&#x7684;&#x4F18;&#x5316;,&#x800C;&#x4E0D;&#x662F;&#x8BA9;&#x4EE3;&#x7801;&#x4E0D;&#x901A;&#x7528;&#x7684;,&#x66F4;&#x96BE;&#x4EE5;&#x7406;&#x89E3;&#x3002;</p>
<h4 id="return-mul-unitymatrixmvp-v">return mul (UNITY_MATRIX_MVP, v);</h4>
<p>&#x8FD9;&#x662F;&#x9876;&#x70B9;&#x7684;&#x6838;&#x5FC3;&#x51FD;&#x6570;,&#x5728;3d&#x5750;&#x6807;&#x6295;&#x5F71;&#x5230;&#x4E8C;&#x7EF4;&#x7A97;&#x53E3;&#x3002;&#x8FD9;&#x4E2A;&#x8FC7;&#x7A0B;&#x5305;&#x62EC;&#x4E58;&#x4EE5;3d&#x4F4D;&#x7F6E;&#x77E9;&#x9635;&#x79F0;&#x4E3A;Model-View-Projection</p>
<h4 id="fixed4-frag--color">fixed4 frag() : COLOR</h4>
<p>&#x8FD9;&#x4E00;&#x884C;&#x5B9A;&#x4E49;&#x4E86;&#x51FD;&#x6570;&#x7684;&#x7247;&#x6BB5;,&#x4E5F;&#x5C31;&#x662F;&#x7247;&#x6BB5;&#x7740;&#x8272;&#x5668;&#x4F7F;&#x7528;&#x7684;&#x662F;&#x5176;&#x4E3B;&#x8981;&#x529F;&#x80FD;&#x3002;&#x5728;&#x8FD9;&#x8282;&#x8BFE;&#x4E2D;,&#x6CA1;&#x6709;&#x5206;&#x6BB5;&#x51FD;&#x6570;&#x7684;&#x8F93;&#x5165;&#x53C2;&#x6570;,&#x8F93;&#x51FA;&#x662F;&#x5B9A;&#x4E49;&#x4E3A;&#x4E00;&#x4E2A;&#x989C;&#x8272;&#x503C;&#x5B9A;&#x4E49;&#x5728;&#x4E00;&#x4E2A;fixed4&#x53D8;&#x91CF;&#x5305;&#x542B;RGBA(&#x7EA2;,&#x7EFF;,&#x84DD;,&#x3B1;)&#x7684;&#x989C;&#x8272;&#x3002;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x989C;&#x8272;&#x4F5C;&#x4E3A;&#x53EF;&#x89C6;&#x5316;&#x7684;&#x4E00;&#x4E2A;&#x6D6E;&#x70B9;&#x6570;&#x53D8;&#x91CF;,&#x751A;&#x81F3;&#x9876;&#x70B9;&#x4E4B;&#x95F4;&#x4F20;&#x9012;&#x4FE1;&#x606F;&#x548C;&#x7247;&#x6BB5;&#x7740;&#x8272;&#x5668;&#x3002;&#x7136;&#x800C;&#x989C;&#x8272;&#x53D8;&#x91CF;&#x503C;0&#x548C;1&#x4E4B;&#x95F4;&#x7684;&#x9650;&#x5236;&#x6240;&#x4EE5;&#x5E0C;&#x671B;&#x6539;&#x53D8;&#x989C;&#x8272;&#x53D8;&#x91CF;&#x4E2D;&#x7684;&#x503C;&#x3002;</p>
<h4 id="return-fixed410000010">return fixed4(1.0,0.0,0.0,1.0)</h4>
<p>&#x5206;&#x6BB5;&#x51FD;&#x6570;&#x7684;&#x6838;&#x5FC3;&#x529F;&#x80FD;,&#x4E3A;&#x6BCF;&#x4E2A;&#x50CF;&#x7D20;&#x5904;&#x7406;&#x7684;&#x7247;&#x6BB5;&#x7740;&#x8272;&#x5668;&#x5B9A;&#x4E49;&#x4E86;&#x7EA2;&#x8272;&#x3002;</p>
<p><img src="../assets/ShaderSolidColor.png" alt=""></p>
<h2 id="&#xFFFC;">&#xFFFC;</h2>
<h4 id="window-coordinates">Window Coordinates</h4>
<p>&#x8FD9;&#x4E2A;&#x7740;&#x8272;&#x5668;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#x9759;&#x6001;&#x7684;&#x989C;&#x8272;&#x53D6;&#x51B3;&#x4E8E;&#x7A97;&#x53E3;&#x7684;&#x50CF;&#x7D20;&#x5750;&#x6807;&#x3002;&#x8FD9;&#x5141;&#x8BB8;&#x5B9A;&#x4E49;&#x5C4F;&#x5E55;&#x989C;&#x8272;&#x7684;&#x72EC;&#x7ACB;&#x4E8E;&#x51E0;&#x4F55;&#x6E32;&#x67D3;&#x3002;&#x5982;&#x679C;&#x4F60;&#x79FB;&#x52A8;plane,&#x4F60;&#x53EF;&#x4EE5;&#x5728;&#x5C4F;&#x5E55;&#x4E0A;&#x770B;&#x5230;&#x7684;&#x989C;&#x8272;&#x53D8;&#x5316;&#x3002;</p>
<pre><code class="lang-javascript">
    Shader &quot;Custom/WindowCoordinates/Base&quot; {
        SubShader {
            Pass {
                CGPROGRAM

                #pragma vertex vert
                #pragma fragment frag
                #pragma target 3.0

                #include &quot;UnityCG.cginc&quot;

                float4 vert(appdata_base v) : POSITION {
                    return mul (UNITY_MATRIX_MVP, v.vertex);
                }

                fixed4 frag(float4 sp:VPOS) : SV_Target {
                    return fixed4(sp.xy/_ScreenParams.xy,0.0,1.0);
                }

                ENDCG
            }
        }
    }
</code></pre>
<h4 id="pragma-target-30">pragma target 3.0</h4>
<p>&#x76EE;&#x6807;&#x6307;&#x4EE4;&#x5B9A;&#x4E49;&#x4E86;&#x786C;&#x4EF6;&#x9700;&#x6C42;&#x652F;&#x6301;&#x7740;&#x8272;&#x5668;&#x3002;</p>
<h4 id="include-unitycgcginc">include &quot;UnityCG.cginc&quot;</h4>
<p>Include the file &#x201C;UnityCG.cginc&#x201D; inside the code of the shader.</p>
<h4 id="appdatabase-v">appdata_base v</h4>
<p>Unity&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A;&#x9ED8;&#x8BA4;&#x7684;&#x7ED3;&#x6784;&#x8BBE;&#x7F6E;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#x7684;&#x8F93;&#x5165;&#x53D8;&#x91CF;&#x3002;</p>
<h4 id="vpos">VPOS</h4>
<p>Input argument for the frag function, which is declared as a float4 type and VPOS semantics. Semantics is a special clause of HLSL/Cg to define the default input values of a fragment/vertex Shader. VPOS fills the variable with the values of the pixel coordinates in the screen of the rendered shader. This position needs to be divided by the screen size, the values are transformed into 0 and 1 values so they can be mapped as the RG components of the output color.
frag&#x51FD;&#x6570;&#x8F93;&#x5165;&#x53C2;&#x6570;,&#x58F0;&#x660E;&#x4E3A;float4&#x7C7B;&#x578B;&#x548C;VPOS&#x8BED;&#x4E49;&#x3002;&#x8BED;&#x4E49;&#x662F;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x7684;&#x6761;&#x6B3E;HLSL / Cg&#x5B9A;&#x4E49;&#x9ED8;&#x8BA4;&#x7684;&#x8F93;&#x5165;&#x503C;&#x7684;&#x4E00;&#x4E2A;&#x7247;&#x6BB5;/&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#x3002;VPOS&#x5145;&#x6EE1;&#x53D8;&#x91CF;&#x7684;&#x503C;&#x50CF;&#x7D20;&#x5750;&#x6807;&#x7684;&#x5C4F;&#x5E55;&#x6750;&#x8D28;&#x5448;&#x73B0;&#x3002;&#x8FD9;&#x4E2A;&#x804C;&#x4F4D;&#x9700;&#x8981;&#x9664;&#x4EE5;&#x5C4F;&#x5E55;&#x5927;&#x5C0F;&#x7684;&#x503C;&#x8F6C;&#x6362;&#x4E3A;0&#x548C;1&#x7684;&#x503C;,&#x8FD9;&#x6837;&#x4ED6;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x88AB;&#x6620;&#x5C04;&#x7684;RG&#x7EC4;&#x4EF6;&#x8F93;&#x51FA;&#x7684;&#x989C;&#x8272;&#x3002;</p>
<h4 id="screenparams">ScreenParams</h4>
<p>The screen width and height values are stored in the variable _ScreenParams; this variable is declared in the UnityCG.cginc file.
&#x5C4F;&#x5E55;&#x7684;&#x5BBD;&#x5EA6;&#x548C;&#x9AD8;&#x5EA6;&#x503C;&#x5B58;&#x50A8;&#x5728;&#x53D8;&#x91CF;_ScreenParams;UnityCG&#x4E2D;&#x58F0;&#x660E;&#x8BE5;&#x53D8;&#x91CF;&#x3002;cginc&#x6587;&#x4EF6;&#x3002;
&#xFFFC;
<img src="../assets/ShaderWindowsCoordinates.png" alt=""></p>
<p>Examples
Window coordinates are not commonly used in shaders, because normally the shaders work with the position of the texture as you will see in the next lessons. However some interesting effects like Render with a Mask or some other image effects use this property.
&#x5728;&#x7740;&#x8272;&#x5668;&#x7A97;&#x53E3;&#x5750;&#x6807;&#x662F;&#x4E0D;&#x5E38;&#x7528;&#x7684;,&#x56E0;&#x4E3A;&#x901A;&#x5E38;&#x7740;&#x8272;&#x5668;&#x4F7F;&#x7528;&#x7EB9;&#x7406;&#x6B63;&#x5982;&#x60A8;&#x5C06;&#x770B;&#x5230;&#x7684;&#x4F4D;&#x7F6E;&#x5728;&#x63A5;&#x4E0B;&#x6765;&#x7684;&#x8BFE;&#x7A0B;&#x3002;&#x7136;&#x800C;&#x4E00;&#x4E9B;&#x6709;&#x8DA3;&#x7684;&#x6548;&#x679C;,&#x5982;&#x7528;Mask&#x6E32;&#x67D3;&#x56FE;&#x6216;&#x5176;&#x4ED6;&#x7684;&#x5F62;&#x8C61;&#x5F71;&#x54CD;&#x4F7F;&#x7528;&#x8FD9;&#x4E2A;&#x5C5E;&#x6027;&#x3002;</p>
<h4 id="behind-bars">Behind bars</h4>
<pre><code class="lang-javascript">
    Shader &quot;Custom/WindowCoordinates/Bars&quot; {
        SubShader {
            Pass {
                CGPROGRAM
                #pragma vertex vert
                #pragma fragment frag

                #include &quot;UnityCG.cginc&quot;

                struct vertOut {
                    float4 pos:SV_POSITION;
                    float4 scrPos;
                };

                vertOut vert(appdata_base v) {
                    vertOut o;
                    o.pos = mul (UNITY_MATRIX_MVP, v.vertex);
                    o.scrPos = ComputeScreenPos(o.pos);
                    return o;
                }

                fixed4 frag(vertOut i) : SV_Target {
                    float2 wcoord = (i.scrPos.xy/i.scrPos.w);
                    fixed4 color;

                    if (fmod(20.0*wcoord.x,2.0)&lt;1.0) {
                        color = fixed4(wcoord.xy,0.0,1.0);
                    } else {
                        color = fixed4(0.3,0.3,0.3,1.0);
                    }
                    return color;
                }

                ENDCG
            }
        }
    }
</code></pre>
<h4 id="struct-vertout">struct vertOut</h4>
<p>&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x65B0;&#x7C7B;&#x578B;&#x7684;&#x53D8;&#x91CF;,&#x8FD9;&#x662F;&#x4E00;&#x4E2A;&#x590D;&#x5408;&#x7C7B;&#x578B;,&#x4EE3;&#x8868;&#x4E00;&#x7EC4;&#x5176;&#x4ED6;&#x53D8;&#x91CF;&#x4E0E;&#x672C;&#x5730;&#x6216;&#x590D;&#x5408;&#x7C7B;&#x578B;&#x3002;&#x7ED3;&#x6784;&#x65F6;&#x4F7F;&#x7528;&#x8D85;&#x8FC7;&#x4E00;&#x4E2A;&#x672C;&#x5730;&#x6570;&#x636E;&#x9700;&#x8981;&#x901A;&#x8FC7;&#x4ECE;&#x9876;&#x70B9;&#x5230;&#x7247;&#x6BB5;&#x7740;&#x8272;&#x5668;&#x3002;&#x4F5C;&#x4E3A;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x7684;&#x8FD4;&#x56DE;&#x6570;&#x636E;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x53D8;&#x91CF;,&#x7528;&#x7ED3;&#x6784;&#x7684;&#x4E00;&#x7EC4;&#x503C;&#x53EF;&#x4EE5;&#x8868;&#x793A;&#x6210;&#x4E00;&#x4E2A;&#x552F;&#x4E00;&#x503C;&#x3002;</p>
<h4 id="computescreenpos">ComputeScreenPos</h4>
<p>UnityCG&#x51FD;&#x6570;&#x5B9A;&#x4E49;&#x3002;cginc&#x6587;&#x4EF6;,&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x8FD4;&#x56DE;&#x5C4F;&#x5E55;&#x4F4D;&#x7F6E;&#x7684;&#x7247;&#x6BB5;&#x7740;&#x8272;&#x5668;&#x3002;&#x4E0E;&#x524D;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x7684;&#x533A;&#x522B;VPOS&#x8BED;&#x4E49;&#x53D8;&#x91CF;&#x4F7F;&#x7528;,&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x662F;&#x591A;&#x5E73;&#x53F0;,&#x5B83;&#x4E0D;&#x9700;&#x8981;&#x76EE;&#x6807;3.0&#x3002;</p>
<p>&#xFFFC;<img src="../assets/ShaderWindowsCoordinatesBars.png" alt=""></p>
<h4 id="vignetting-&#x6E10;&#x6655;">Vignetting &#x6E10;&#x6655;</h4>
<pre><code class="lang-javascript">
    Shader &quot;Custom/WindowCoordinates/Vignetting&quot; {
        SubShader {
            Pass {
                CGPROGRAM

                #pragma vertex vert
                #pragma fragment frag
                #pragma target 3.0

                #include &quot;UnityCG.cginc&quot;

                float4 vert(appdata_base v) : POSITION {
                    return mul (UNITY_MATRIX_MVP, v.vertex);
                }

                fixed4 frag(float4 sp:VPOS) : SV_Target {
                    float2 wcoord = sp.xy/_ScreenParams.xy;
                    float vig = clamp(3.0*length(wcoord-0.5),0.0,1.0);
                    return lerp (fixed4(wcoord,0.0,1.0),fixed4(0.3,0.3,0.3,1.0),vig);
                }
                ENDCG
            }
        }
    }
</code></pre>
<p>&#xFFFC;
<img src="../assets/ShaderWindowsCoordinatesVignetting.png" alt=""></p>
<h4 id="lerp">lerp</h4>
<p>Standard function of the Cg language, this function is a linear interpolation between the first two arguments given the third as a factor. Many functions are implemented in the Cg language as standard functions.
Cg&#x8BED;&#x8A00;&#x7684;&#x6807;&#x51C6;&#x51FD;&#x6570;,&#x8FD9;&#x4E2A;&#x51FD;&#x6570;&#x662F;&#x7B2C;&#x4E00;&#x4E2A;&#x4E24;&#x4E2A;&#x53C2;&#x6570;&#x4E4B;&#x95F4;&#x7684;&#x7EBF;&#x6027;&#x63D2;&#x503C;&#x7ED9;&#x5B9A;&#x7684;&#x7B2C;&#x4E09;&#x4E2A;&#x56E0;&#x7D20;&#x3002;&#x5B9E;&#x73B0;&#x8BB8;&#x591A;&#x529F;&#x80FD;&#x5728;Cg&#x8BED;&#x8A00;&#x4F5C;&#x4E3A;&#x6807;&#x51C6;&#x529F;&#x80FD;&#x3002;</p>
<h4 id="circles-mask">Circles Mask</h4>
<p>Some shaders need external information given in types like Variables, Arrays, Textures. These cases are covered by the use of uniforms and properties in ShaderLab. Properties define a set of types which can be passed to the shader in every run. The variables can modify the behavior of the shader. The following example shows how to change the values of a shader mask full of circles. The number of rows and columns can also change the size of the circles.
&#x4E00;&#x4E9B;&#x7740;&#x8272;&#x5668;&#x9700;&#x8981;&#x5916;&#x90E8;&#x4FE1;&#x606F;&#x7684;&#x7C7B;&#x578B;&#x53D8;&#x91CF;&#x3001;&#x6570;&#x7EC4;&#x3001;&#x7EB9;&#x7406;&#x3002;&#x8FD9;&#x4E9B;&#x6848;&#x4F8B;&#x662F;&#x7531;&#x5728;ShaderLab &#x4E2D;uniforms&#x548C;properties&#x7684;&#x4F7F;&#x7528;&#x3002;&#x5C5E;&#x6027;&#x5B9A;&#x4E49;&#x4E00;&#x7EC4;&#x7C7B;&#x578B;,&#x53EF;&#x4EE5;&#x4F20;&#x9012;&#x7ED9;&#x6BCF;&#x4E2A;&#x8FD0;&#x884C;&#x7684;&#x6750;&#x8D28;&#x3002;&#x53D8;&#x91CF;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x6750;&#x8D28;&#x7684;&#x884C;&#x4E3A;&#x3002;&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x663E;&#x793A;&#x4E86;&#x5982;&#x4F55;&#x6539;&#x53D8;&#x7684;&#x503C;&#x7684;shader mask&#x3002;&#x884C;&#x548C;&#x5217;&#x7684;&#x6570;&#x91CF;&#x4E5F;&#x53EF;&#x4EE5;&#x6539;&#x53D8;&#x5927;&#x5C0F;&#x7684;&#x5706;&#x5708;&#x3002;</p>
<pre><code class="lang-javascript">
    Shader &quot;Custom/WindowCoordinates/CirclesMask&quot; {
        Properties {
            _CirclesX (&quot;Circles in X&quot;, Float) = 20
            _CirclesY (&quot;Circles in Y&quot;, Float) = 10
            _Fade (&quot;Fade&quot;, Range (0.1,1.0)) = 0.5
        }
        SubShader {
            Pass {

                CGPROGRAM

                #pragma vertex vert
                #pragma fragment frag
                #pragma target 3.0

                #include &quot;UnityCG.cginc&quot;

                uniform float _CirclesX;
                uniform float _CirclesY;
                uniform float _Fade;

                float4 vert(appdata_base v) : POSITION {
                    return mul (UNITY_MATRIX_MVP, v.vertex);
                }

                fixed4 frag(float4 sp:VPOS) : SV_Target {
                    float2 wcoord = sp.xy/_ScreenParams.xy;
                    fixed4 color;
                    if (length(fmod(float2(_CirclesX*wcoord.x,_CirclesY*wcoord.y),2.0)-1.0)&lt;_Fade) {
                        color = fixed4(sp.xy/_ScreenParams.xy,0.0,1.0);
                    } else {
                        color = fixed4(0.3,0.3,0.3,1.0);
                    } 
                    return color;
                }
                ENDCG
            }
        }
    }
</code></pre>
<h4 id="uniform">uniform</h4>
<p>ShaderLab&#x5C5E;&#x6027;&#x5B9A;&#x4E49;&#x4E3A;&#x4ECE;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x8F6C;&#x79FB;&#x5230;&#x6750;&#x8D28;&#x7684;&#x503C;&#x3002;&#x5C5E;&#x6027;&#x5B9A;&#x4E49;&#x7B49;&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x7684;&#x989C;&#x8272;,&#x6D6E;&#x52A8;,2d&#x7B49;&#x7B49;&#x3002;&#x4F7F;&#x7528;&#x5173;&#x952E;&#x5B57;&#x503C;&#x5B9A;&#x4E49;&#x4E3A;&#x6750;&#x8D28;&#x7684;&#x5C5E;&#x6027;Unity&#x5E94;&#x8BE5;&#x4F7F;&#x7528;&#x58F0;&#x660E;&#x7684;&#x53D8;&#x91CF;,&#x6240;&#x4EE5;&#x7F16;&#x8BD1;&#x5668;&#x8BC6;&#x522B;&#x53D8;&#x91CF;&#x4F5C;&#x4E3A;&#x5916;&#x90E8;&#x503C;&#x5E94;&#x8BE5;&#x5728;&#x6BCF;&#x4E2A;&#x6267;&#x884C;&#x8F6C;&#x79FB;&#x5230;&#x6750;&#x8D28;&#x3002;</p>
<p>&#xFFFC;<img src="../assets/ShaderWindowsCoordinatesCirclesMask.png" alt=""></p>
<h4 id="texture-coordinates&#x7EB9;&#x7406;&#x5750;&#x6807;">Texture Coordinates(&#x7EB9;&#x7406;&#x5750;&#x6807;)</h4>
<p>&#x8FD9;&#x8282;&#x8BFE;&#x4ECB;&#x7ECD;&#x4E00;&#x5957;&#x7740;&#x8272;&#x5668;&#x4F7F;&#x7528;&#x7EB9;&#x7406;&#x5750;&#x6807;&#x753B;&#x7F51;&#x683C;&#x7684;&#x9762;&#x5177;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x5F71;&#x54CD;&#x3002;</p>
<p>&#x5728;&#x7F51;&#x72B6;&#x7ED3;&#x6784;&#x4F4D;&#x7F6E;&#x7684;&#x53D8;&#x91CF;texcoord0,&#x6BCF;&#x4E2A;&#x9876;&#x70B9;&#x3002;&#x9876;&#x70B9;&#x548C;&#x7247;&#x6BB5;&#x7740;&#x8272;&#x5668;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x8FD9;&#x4E2A;&#x53D8;&#x91CF;&#x3002;&#x4F60;&#x5E94;&#x8BE5;&#x9009;&#x62E9;&#x4F60;&#x4FEE;&#x6539;texcoord0&#x7684;&#x6750;&#x8D28;,&#x6839;&#x636E;&#x6240;&#x9700;&#x7684;&#x53D8;&#x91CF;&#x64CD;&#x4F5C;,&#x73B0;&#x573A;&#x7684;&#x9876;&#x70B9;&#x6570;&#x91CF;&#x548C;&#x5C4F;&#x5E55;&#x5206;&#x8FA8;&#x7387;&#x3002;&#x4F60;&#x5E94;&#x8BE5;&#x9009;&#x62E9;&#x4FEE;&#x6539;&#x5BFB;&#x627E;&#x6700;&#x5C0F;&#x7684;&#x6267;&#x884C;&#x6570;texcoord0&#x503C;&#x3002;</p>
<pre><code class="lang-javascript">
    Shader &quot;Custom/TextureCoordinates/Base&quot; {
        SubShader {
            Pass {
                CGPROGRAM
                #pragma vertex vert
                #pragma fragment frag
                #pragma target 3.0

                #include &quot;UnityCG.cginc&quot;

                struct vertexInput {
                    float4 vertex : POSITION;
                    float4 texcoord0 : TEXCOORD0;
                };

                struct fragmentInput{
                    float4 position : SV_POSITION;
                    float4 texcoord0 : TEXCOORD0;
                };

                fragmentInput vert(vertexInput i){
                    fragmentInput o;
                    o.position = mul (UNITY_MATRIX_MVP, i.vertex);
                    o.texcoord0 = i.texcoord0;
                    return o;
                }
                fixed4 frag(fragmentInput i) : SV_Target {
                    return fixed4(i.texcoord0.xy,0.0,1.0);
                }
                ENDCG
            }
        }
    }
</code></pre>
<p>texcoord0&#x7684;&#x503C;&#x7684;&#x8303;&#x56F4;&#x4ECE;0&#x5230;1,&#x5B83;&#x4EEC;&#x6620;&#x5C04;&#x5230;&#x4E00;&#x4E2A;&#x7279;&#x5B9A;&#x7684;&#x7EB9;&#x7406;&#x3002;&#x7EB9;&#x7406;&#x56FE;&#x50CF;&#x5B58;&#x50A8;&#x5728;&#x5185;&#x5B58;&#x7684;GPU&#x4EE3;&#x8868;&#x4E00;&#x4E2A;&#x6B63;&#x65B9;&#x5F62;&#x6216;&#x77E9;&#x5F62;&#x56FE;&#x50CF;,&#x7247;&#x6BB5;&#x7740;&#x8272;&#x5668;&#x7684;&#x6750;&#x8D28;&#x4E5F;&#x53EF;&#x4EE5;&#x7528;&#x4F5C;&#x7A0B;&#x5E8F;&#x7EB9;&#x7406;,&#x4F7F;&#x7528;&#x6570;&#x5B66;&#x51FD;&#x6570;&#x6765;&#x5B9A;&#x4E49;&#x6BCF;&#x4E2A;&#x50CF;&#x7D20;&#x5728;&#x5C4F;&#x5E55;&#x4E0A;&#x7684;&#x989C;&#x8272;&#x3002;&#x5728;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x4E2D;&#x60A8;texcoord0&#x503C;&#x88AB;&#x7528;&#x6765;&#x8BBE;&#x7F6E;&#x7684;&#x989C;&#x8272;&#x7EA2;&#x8272;&#x548C;&#x7EFF;&#x8272;&#x901A;&#x9053;,&#x6BCF;&#x4E2A;&#x989C;&#x8272;&#x7684;&#x6E10;&#x53D8;&#x6548;&#x679C;&#x3002;</p>
<p><img src="../assets/ShaderTextureCoordinates.png" alt="">
&#xFFFC;</p>
<p>Examples
Chess</p>
<pre><code class="lang-javascript">
    Shader &quot;Custom/TextureCoordinates/Chess&quot; {
        SubShader {
            Pass {
                CGPROGRAM
                #pragma vertex vert
                #pragma fragment frag

                #include &quot;UnityCG.cginc&quot;

                struct vertexInput {
                    float4 vertex : POSITION;
                    float4 texcoord0 : TEXCOORD0;
                };

                struct fragmentInput{
                    float4 position : SV_POSITION;
                    float4 texcoord0 : TEXCOORD0;
                };

                fragmentInput vert(vertexInput i){
                    fragmentInput o;
                    o.position = mul (UNITY_MATRIX_MVP, i.vertex);
                    o.texcoord0 = i.texcoord0;
                    return o;
                }

                fixed4 frag(fragmentInput i) : SV_Target {
                    fixed4 color;
                    if ( fmod(i.texcoord0.x*8.0,2.0) &lt; 1.0 ){
                        if ( fmod(i.texcoord0.y*8.0,2.0) &lt; 1.0 )
                        {
                            color = fixed4(1.0,1.0,1.0,1.0);
                        } else {
                            color = fixed4(0.0,0.0,0.0,1.0);
                        }
                    } else {
                        if ( fmod(i.texcoord0.y*8.0,2.0) &gt; 1.0 )
                        {
                            color = fixed4(1.0,1.0,1.0,1.0);
                        } else {
                            color = fixed4(0.0,0.0,0.0,1.0);}
                        }
                    return color;
                }
                ENDCG
            }
        }
    }
</code></pre>
<pre><code class="lang-javascript">
    Shader &quot;Custom/TextureCoordinates/ChessOpt&quot; {
        SubShader {
            Pass {
                CGPROGRAM
                #pragma vertex vert_img
                #pragma fragment frag

                #include &quot;UnityCG.cginc&quot;

                fixed4 frag(v2f_img i) : SV_Target {
                    bool p = fmod(i.uv.x*8.0,2.0) &lt; 1.0;
                    bool q = fmod(i.uv.y*8.0,2.0) &gt; 1.0;

                    return fixed4(fixed3((p &amp;&amp; q) || !(p || q)),1.0);
                }
                ENDCG
            }
        }
    }
</code></pre>
<p>&#xFFFC;
<img src="../assets/ShaderTextureCoordinatesChess.png" alt=""></p>
<p>Mandelbrot Fractal
&#x66FC;&#x5FB7;&#x5E03;&#x6D1B;&#x7279;&#x788E;&#x7247;&#x5F62;</p>
<pre><code class="lang-javascript">
    Shader &quot;Custom/TextureCoordinates/Mandelbrot&quot; {

        SubShader {
            Pass {
                CGPROGRAM
                #pragma vertex vert_img
                #pragma fragment frag
                #pragma target 3.0

                #include &quot;UnityCG.cginc&quot;

                float4 frag(v2f_img i) : SV_Target {
                    float2 mcoord;
                    float2 coord = float2(0.0,0.0);
                    mcoord.x = ((1.0-i.uv.x)*3.5)-2.5;
                    mcoord.y = (i.uv.y*2.0)-1.0;
                    float iteration = 0.0;
                    const float _MaxIter = 29.0;
                    const float PI = 3.14159;
                    float xtemp;
                    for ( iteration = 0.0; iteration &lt; _MaxIter; iteration += 1.0) {
                        if ( coord.x*coord.x + coord.y*coord.y &gt; 2.0*(cos(fmod(_Time.y,2.0*PI))+1.0) )
                        break;
                        xtemp = coord.x*coord.x - coord.y*coord.y + mcoord.x;
                        coord.y = 2.0*coord.x*coord.y + mcoord.y;
                        coord.x = xtemp;
                    }
                    float val = fmod((iteration/_MaxIter)+_Time.x,1.0);
                    float4 color;

                    color.r = clamp((3.0*abs(fmod(2.0*val,1.0)-0.5)),0.0,1.0);
                    color.g = clamp((3.0*abs(fmod(2.0*val+(1.0/3.0),1.0)-0.5)),0.0,1.0);
                    color.b = clamp((3.0*abs(fmod(2.0*val-(1.0/3.0),1.0)-0.5)),0.0,1.0);
                    color.a = 1.0;

                    return color;
                }
                ENDCG
            }
        }
    }
</code></pre>
<p>&#xFFFC;
<img src="../assets/ShaderTextureCoordinatesMandelbrot.png" alt=""></p>
<p>Texture</p>
<pre><code class="lang-javascript">
    Shader &quot;Custom/TextureCoordinates/ActualTexture&quot; {
        Properties {
            _MainTex (&quot;Base (RGB)&quot;, 2D) = &quot;white&quot; {}
        }
        SubShader {
            Pass {
                CGPROGRAM
                #pragma vertex vert_img
                #pragma fragment frag

                #include &quot;UnityCG.cginc&quot;

                uniform sampler2D _MainTex;

                fixed4 frag(v2f_img i) : SV_Target {
                    return tex2D(_MainTex, i.uv);
                }
                ENDCG
            }
        }
    }
</code></pre>
<p>&#xFFFC;
<img src="../assets/ShaderTextureCoordinatesTexture.png" alt=""></p>

                                
                                </section>
                            
                        </div>
                    </div>
                
            </div>

            
                
                <a href="第2章-顶点和片段着色器.html" class="navigation navigation-prev " aria-label="Previous page: 第2章 顶点和片段着色器">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="12-shader-语义（semantics）.html" class="navigation navigation-next " aria-label="Next page: 1.2 着色器语义">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"1.1 顶点和片段着色器 举例","level":"1.2.2.1","depth":3,"next":{"title":"1.2 着色器语义","level":"1.2.2.2","depth":3,"path":"1. ShaderLab 框架/12-shader-语义（semantics）.md","ref":"1. ShaderLab 框架/12-shader-语义（semantics）.md","articles":[]},"previous":{"title":"第2章 顶点和片段着色器","level":"1.2.2","depth":2,"path":"1. ShaderLab 框架/第2章-顶点和片段着色器.md","ref":"1. ShaderLab 框架/第2章-顶点和片段着色器.md","articles":[{"title":"1.1 顶点和片段着色器 举例","level":"1.2.2.1","depth":3,"path":"1. ShaderLab 框架/11-顶点和片段着色器-举例.md","ref":"1. ShaderLab 框架/11-顶点和片段着色器-举例.md","articles":[]},{"title":"1.2 着色器语义","level":"1.2.2.2","depth":3,"path":"1. ShaderLab 框架/12-shader-语义（semantics）.md","ref":"1. ShaderLab 框架/12-shader-语义（semantics）.md","articles":[]},{"title":"1.3 在 Cg\\/HLSL 中访问着色器属性","level":"1.2.2.3","depth":3,"path":"1. ShaderLab 框架/13-在-cghlsl-中访问-shader-属性.md","ref":"1. ShaderLab 框架/13-在-cghlsl-中访问-shader-属性.md","articles":[]},{"title":"1.4 为顶点程序提供顶点数据","level":"1.2.2.4","depth":3,"path":"1. ShaderLab 框架/14-为顶点程序提供顶点数据.md","ref":"1. ShaderLab 框架/14-为顶点程序提供顶点数据.md","articles":[]},{"title":"1.5 内置 Shader 包含的文件","level":"1.2.2.5","depth":3,"path":"1. ShaderLab 框架/15-内置-shader-包含的文件.md","ref":"1. ShaderLab 框架/15-内置-shader-包含的文件.md","articles":[]},{"title":"1.6 预定义着色器预处理宏","level":"1.2.2.6","depth":3,"path":"1. ShaderLab 框架/16-预定义着色器预处理宏.md","ref":"1. ShaderLab 框架/16-预定义着色器预处理宏.md","articles":[]},{"title":"1.7 内置的辅助功能","level":"1.2.2.7","depth":3,"path":"1. ShaderLab 框架/17-内置的辅助功能.md","ref":"1. ShaderLab 框架/17-内置的辅助功能.md","articles":[]},{"title":"1.8 内置的着色器变量","level":"1.2.2.8","depth":3,"path":"1. ShaderLab 框架/18-内置的着色器变量.md","ref":"1. ShaderLab 框架/18-内置的着色器变量.md","articles":[]},{"title":"1.9 制作多个着色程序变体","level":"1.2.2.9","depth":3,"path":"1. ShaderLab 框架/19-制作多个着色程序变体.md","ref":"1. ShaderLab 框架/19-制作多个着色程序变体.md","articles":[]},{"title":"1.10 GLSL 着色器程序","level":"1.2.2.10","depth":3,"path":"1. ShaderLab 框架/110-glsl-着色器程序.md","ref":"1. ShaderLab 框架/110-glsl-着色器程序.md","articles":[]},{"title":"1.11 Unity 中使用的着色器语言","level":"1.2.2.11","depth":3,"path":"1. ShaderLab 框架/111-unity-中使用的着色器语言.md","ref":"1. ShaderLab 框架/111-unity-中使用的着色器语言.md","articles":[]},{"title":"1.12 着色器编译目标级别","level":"1.2.2.12","depth":3,"path":"1. ShaderLab 框架/112-着色器编译目标级别.md","ref":"1. ShaderLab 框架/112-着色器编译目标级别.md","articles":[]},{"title":"1.13 着色器数据类型和精度","level":"1.2.2.13","depth":3,"path":"1. ShaderLab 框架/113-着色器数据类型和精度.md","ref":"1. ShaderLab 框架/113-着色器数据类型和精度.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["-search","livereload"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"fontsettings":{"theme":"white","family":"sans","size":2},"livereload":{},"highlight":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","dirction":"沈军","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"ShaderLab 开发实战","language":"zh-cn","gitbook":">=2.0.0","description":"Cg语法及ShaderLab开发实战"},"file":{"path":"1. ShaderLab 框架/11-顶点和片段着色器-举例.md","mtime":"2016-12-24T07:07:38.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2016-12-24T15:12:46.163Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

