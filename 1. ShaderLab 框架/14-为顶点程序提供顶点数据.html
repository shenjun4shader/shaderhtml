
<!DOCTYPE HTML>
<html lang="zh-cn" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>1.4 为顶点程序提供顶点数据 · ShaderLab 开发实战</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="15-内置-shader-包含的文件.html" />
    
    
    <link rel="prev" href="13-在-cghlsl-中访问-shader-属性.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="1.0 ShaderLab 框架.html">
            
                <a href="1.0 ShaderLab 框架.html">
            
                    
                    1. ShaderLab 框架
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="第1章-shaderlab-语法.html">
            
                <a href="第1章-shaderlab-语法.html">
            
                    
                    第1章 ShaderLab 语法
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="11-属性（properties）.html">
            
                <a href="11-属性（properties）.html">
            
                    
                    1.1 属性（Properties）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2" data-path="12-子着色器（subshader）.html">
            
                <a href="12-子着色器（subshader）.html">
            
                    
                    1.2 子着色器（SubShader）
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.2.1" data-path="121-pass.html">
            
                <a href="121-pass.html">
            
                    
                    1.2.1 Pass
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.2.1.1" data-path="1211-culling--depth-testing.html">
            
                <a href="1211-culling--depth-testing.html">
            
                    
                    1.2.1.1 Culling & Depth Testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.1.2" data-path="1212-blending.html">
            
                <a href="1212-blending.html">
            
                    
                    1.2.1.2 Blending
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.1.3" data-path="1213-pass-tags.html">
            
                <a href="1213-pass-tags.html">
            
                    
                    1.2.1.3 Pass Tags
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.1.4" data-path="1214-stencil.html">
            
                <a href="1214-stencil.html">
            
                    
                    1.2.1.4 Stencil
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.1.5" data-path="1215-name.html">
            
                <a href="1215-name.html">
            
                    
                    1.2.1.5 Name
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.1.6" data-path="1216-legacy-lightiing.html">
            
                <a href="1216-legacy-lightiing.html">
            
                    
                    1.2.1.6 Legacy Lightiing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.1.7" data-path="1217-legacy-texture-combiners.html">
            
                <a href="1217-legacy-texture-combiners.html">
            
                    
                    1.2.1.7 Legacy Texture Combiners
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.1.8" data-path="1218-legacy-alpha-testing.html">
            
                <a href="1218-legacy-alpha-testing.html">
            
                    
                    1.2.1.8 Legacy Alpha Testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.1.9" data-path="1219-legacy-fog.html">
            
                <a href="1219-legacy-fog.html">
            
                    
                    1.2.1.9 Legacy Fog
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.1.10" data-path="12110-legacy-bindchannels.html">
            
                <a href="12110-legacy-bindchannels.html">
            
                    
                    1.2.1.10 Legacy BindChannels
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.2" data-path="122-usepass.html">
            
                <a href="122-usepass.html">
            
                    
                    1.2.2 UsePass
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.3" data-path="123-grabpass.html">
            
                <a href="123-grabpass.html">
            
                    
                    1.2.3 GrabPass
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.2.4" data-path="124-subshader-tags.html">
            
                <a href="124-subshader-tags.html">
            
                    
                    1.2.4 SubShader Tags
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.1.3" data-path="13-回滚语句（fallback）.html">
            
                <a href="13-回滚语句（fallback）.html">
            
                    
                    1.3 回滚语句（Fallback）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.4" data-path="14-自定义编译器（customeditor）.html">
            
                <a href="14-自定义编译器（customeditor）.html">
            
                    
                    1.4 自定义编译器（CustomEditor）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.1.5" data-path="15-其他命令（other-commands）.html">
            
                <a href="15-其他命令（other-commands）.html">
            
                    
                    1.5 其他命令（other commands）
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="第2章-顶点和片段着色器.html">
            
                <a href="第2章-顶点和片段着色器.html">
            
                    
                    第2章 顶点和片段着色器
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="11-顶点和片段着色器-举例.html">
            
                <a href="11-顶点和片段着色器-举例.html">
            
                    
                    1.1 顶点和片段着色器 举例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2" data-path="12-shader-语义（semantics）.html">
            
                <a href="12-shader-语义（semantics）.html">
            
                    
                    1.2 着色器语义
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.3" data-path="13-在-cghlsl-中访问-shader-属性.html">
            
                <a href="13-在-cghlsl-中访问-shader-属性.html">
            
                    
                    1.3 在 Cg\/HLSL 中访问着色器属性
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2.2.4" data-path="14-为顶点程序提供顶点数据.html">
            
                <a href="14-为顶点程序提供顶点数据.html">
            
                    
                    1.4 为顶点程序提供顶点数据
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.5" data-path="15-内置-shader-包含的文件.html">
            
                <a href="15-内置-shader-包含的文件.html">
            
                    
                    1.5 内置 Shader 包含的文件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.6" data-path="16-预定义着色器预处理宏.html">
            
                <a href="16-预定义着色器预处理宏.html">
            
                    
                    1.6 预定义着色器预处理宏
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.7" data-path="17-内置的辅助功能.html">
            
                <a href="17-内置的辅助功能.html">
            
                    
                    1.7 内置的辅助功能
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.8" data-path="18-内置的着色器变量.html">
            
                <a href="18-内置的着色器变量.html">
            
                    
                    1.8 内置的着色器变量
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.9" data-path="19-制作多个着色程序变体.html">
            
                <a href="19-制作多个着色程序变体.html">
            
                    
                    1.9 制作多个着色程序变体
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.10" data-path="110-glsl-着色器程序.html">
            
                <a href="110-glsl-着色器程序.html">
            
                    
                    1.10 GLSL 着色器程序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.11" data-path="111-unity-中使用的着色器语言.html">
            
                <a href="111-unity-中使用的着色器语言.html">
            
                    
                    1.11 Unity 中使用的着色器语言
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.12" data-path="112-着色器编译目标级别.html">
            
                <a href="112-着色器编译目标级别.html">
            
                    
                    1.12 着色器编译目标级别
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.13" data-path="113-着色器数据类型和精度.html">
            
                <a href="113-着色器数据类型和精度.html">
            
                    
                    1.13 着色器数据类型和精度
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="第3章-表面着色器.html">
            
                <a href="第3章-表面着色器.html">
            
                    
                    第3章 表面着色器
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.3.1" data-path="11-表面着色器举例.html">
            
                <a href="11-表面着色器举例.html">
            
                    
                    1.1 表面着色器举例
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.2" data-path="12-自定义光照模型的表面着色器.html">
            
                <a href="12-自定义光照模型的表面着色器.html">
            
                    
                    1.2 自定义光照模型的表面着色器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3.3" data-path="13-使用dx11opengl-的表面着色器的细分网格.html">
            
                <a href="13-使用dx11opengl-的表面着色器的细分网格.html">
            
                    
                    1.3 使用DX11\/OpenGL 的表面着色器的细分网格
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="第4章-高级-shaderlab-主题.html">
            
                <a href="第4章-高级-shaderlab-主题.html">
            
                    
                    第4章 高级 ShaderLab 主题
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.4.1" data-path="11-unity-的渲染管线.html">
            
                <a href="11-unity-的渲染管线.html">
            
                    
                    1.1 Unity 的渲染管线
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.2" data-path="12-书写着色器的性能提示.html">
            
                <a href="12-书写着色器的性能提示.html">
            
                    
                    1.2 书写着色器的性能提示
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.3" data-path="13-使用替换的着色器渲染.html">
            
                <a href="13-使用替换的着色器渲染.html">
            
                    
                    1.3 使用替换的着色器渲染
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.4" data-path="14-自定义着色器gui.html">
            
                <a href="14-自定义着色器gui.html">
            
                    
                    1.4 自定义着色器GUI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.5" data-path="15-使用深度图.html">
            
                <a href="15-使用深度图.html">
            
                    
                    1.5 使用深度图
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.6" data-path="16-特定平台的渲染差异.html">
            
                <a href="16-特定平台的渲染差异.html">
            
                    
                    1.6 特定平台的渲染差异
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.7" data-path="17-着色器细节等级.html">
            
                <a href="17-着色器细节等级.html">
            
                    
                    1.7 着色器细节等级
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.8" data-path="18-纹理数组.html">
            
                <a href="18-纹理数组.html">
            
                    
                    1.8 纹理数组
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.9" data-path="19-使用-visual-studio-调试-directx11-着色器.html">
            
                <a href="19-使用-visual-studio-调试-directx11-着色器.html">
            
                    
                    1.9 使用 Visual Studio 调试 DirectX11 着色器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4.10" data-path="110-固定功能着色器示例.html">
            
                <a href="110-固定功能着色器示例.html">
            
                    
                    1.10 固定功能着色器示例
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../2. Cg 语法/2.0 Cg 语法.html">
            
                <a href="../2. Cg 语法/2.0 Cg 语法.html">
            
                    
                    2. Cg 语法
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../2. Cg 语法/第1章-简介.html">
            
                <a href="../2. Cg 语法/第1章-简介.html">
            
                    
                    第1章 简介
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1.1" data-path="../2. Cg 语法/11-什么是-cg.html">
            
                <a href="../2. Cg 语法/11-什么是-cg.html">
            
                    
                    1.1 什么是 Cg
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.1.2" data-path="../2. Cg 语法/12-顶点、片段和图形流水线.html">
            
                <a href="../2. Cg 语法/12-顶点、片段和图形流水线.html">
            
                    
                    1.2 顶点、片段和图形流水线
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.2" >
            
                <span>
            
                    
                    第2章 最简单的程序
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../2. Cg 语法/第3章-参数、纹理和表达式.html">
            
                <a href="../2. Cg 语法/第3章-参数、纹理和表达式.html">
            
                    
                    第3章 参数、纹理和表达式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" >
            
                <span>
            
                    
                    第4章 变换
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" >
            
                <span>
            
                    
                    第5章 光照
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" >
            
                <span>
            
                    
                    第6章 动画
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" >
            
                <span>
            
                    
                    第7章 环境映射技术
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" >
            
                <span>
            
                    
                    第8章 凹凸映射
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9" >
            
                <span>
            
                    
                    第9章 高级论题
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.10" >
            
                <span>
            
                    
                    第10章 Profile 和性能
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../3. ShaderLab 开发实战/3.0 ShaderLab 开发实战.html">
            
                <a href="../3. ShaderLab 开发实战/3.0 ShaderLab 开发实战.html">
            
                    
                    3. ShaderLab 开发实战
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../3. ShaderLab 开发实战/第18章-案例.html">
            
                <a href="../3. ShaderLab 开发实战/第18章-案例.html">
            
                    
                    第18章 案例
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="../3. ShaderLab 开发实战/181-computeshader介绍.html">
            
                <a href="../3. ShaderLab 开发实战/181-computeshader介绍.html">
            
                    
                    18.1 ComputeShader介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.2" data-path="../3. ShaderLab 开发实战/182-轮廓.html">
            
                <a href="../3. ShaderLab 开发实战/182-轮廓.html">
            
                    
                    18.2 轮廓
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本書使用 GitBook 釋出
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >1.4 为顶点程序提供顶点数据</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
                                <section class="normal markdown-section">
                                
                                <h2 id="&#x4E3A;&#x9876;&#x70B9;&#x7A0B;&#x5E8F;&#x63D0;&#x4F9B;&#x9876;&#x70B9;&#x6570;&#x636E;">&#x4E3A;&#x9876;&#x70B9;&#x7A0B;&#x5E8F;&#x63D0;&#x4F9B;&#x9876;&#x70B9;&#x6570;&#x636E;</h2>
<p>Cg / HLSL&#x9876;&#x70B9;&#x7A0B;&#x5E8F;&#xFF0C;&#x5FC5;&#x987B;&#x901A;&#x8FC7;&#x9876;&#x70B9;&#x6570;&#x636E;&#x7684;&#x7ED3;&#x6784;&#x3002;&#x51E0;&#x4E2A;&#x5E38;&#x7528;&#x7684;&#x9876;&#x70B9;UnityCG&#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x7ED3;&#x6784;&#x3002;cginc&#x5305;&#x542B;&#x6587;&#x4EF6;,&#x5728;&#x5927;&#x591A;&#x6570;&#x60C5;&#x51B5;&#x4E0B;,&#x4F7F;&#x7528;&#x5B83;&#x4EEC;&#x5C31;&#x8DB3;&#x591F;&#x4E86;&#x3002;&#x7684;&#x7ED3;&#x6784;&#x662F;:</p>
<pre><code>appdata_base: vertex consists of position, normal and one texture coordinate.
appdata_tan: vertex consists of position, tangent, normal and one texture coordinate.
appdata_full: vertex consists of position, tangent, normal, four texture coordinates and color.
</code></pre><p>&#x4F8B;&#x5982;,&#x8FD9;&#x4E2A;&#x6750;&#x8D28;&#x989C;&#x8272;&#x7684;&#x7F51;&#x57FA;&#x4E8E;&#x6CD5;&#x7EBF;&#x548C;&#x53EA;&#x4F7F;&#x7528;appdata_base&#x9876;&#x70B9;&#x7A0B;&#x5E8F;&#x8F93;&#x5165;:</p>
<pre><code class="lang-javascript">Shader &quot;VertexInputSimple&quot; {
  SubShader {
    Pass {
      CGPROGRAM
      #pragma vertex vert
      #pragma fragment frag
      #include &quot;UnityCG.cginc&quot;

      struct v2f {
          float4 pos : SV_POSITION;    //SV_Position&#x63CF;&#x8FF0;&#x50CF;&#x7D20;&#x7684;&#x4F4D;&#x7F6E;&#x3002;&#x53EF;&#x7528;&#x5728;&#x6240;&#x6709;&#x7740;&#x8272;&#x5668;0.5&#x50CF;&#x7D20;&#x4E2D;&#x5FC3;&#x504F;&#x79FB;&#x91CF;&#x3002;
          fixed4 color : COLOR;
      };

      v2f vert (appdata_base v)
      {
          v2f o;
          o.pos = mul (UNITY_MATRIX_MVP, v.vertex);
          o.color.xyz = v.normal * 0.5 + 0.5;
          o.color.w = 1.0;
          return o;
      }

      fixed4 frag (v2f i) : SV_Target { return i.color; } //SV_Target &#x8F93;&#x51FA;&#x7684;&#x503C;&#x5B58;&#x50A8;&#x5728;&#x4E00;&#x4E2A;&#x6E32;&#x67D3;&#x76EE;&#x6807;
      ENDCG
    }
  } 
}
</code></pre>
<p>&#x5982;&#x679C;&#x4F60;&#x60F3;&#x8BBF;&#x95EE;&#x4E0D;&#x540C;&#x7684;&#x9876;&#x70B9;&#x6570;&#x636E;&#xFF0C;&#x4F60;&#x5FC5;&#x987B;&#x81EA;&#x5DF1;&#x58F0;&#x660E;&#x9876;&#x70B9;&#x7ED3;&#x6784;&#xFF0C;&#x6216;&#x8005;&#x5411;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#x6DFB;&#x52A0;&#x8F93;&#x5165;&#x53C2;&#x6570;&#x3002;&#x9876;&#x70B9;&#x6570;&#x636E;&#x662F;&#x7528;CG / HLSL&#x8BED;&#x4E49;&#x8BC6;&#x522B;&#xFF0C;&#x5FC5;&#x987B;&#x4ECE;&#x4EE5;&#x4E0B;&#x5217;&#x8868;&#xFF1A;</p>
<pre><code>POSITION is the vertex position, typically a float4.
NORMAL is the vertex normal, typically a float3.
TEXCOORD0 is the first UV coordinate, typically a float2..float4.
TEXCOORD1 .. TEXCOORD3 are the 2nd..4th UV coordinates.
TANGENT is the tangent vector (used for normal mapping), typically a float4.
COLOR is the per-vertex color, typically a float4.
</code></pre><h4 id="&#x793A;&#x4F8B;&#xFF1A;">&#x793A;&#x4F8B;&#xFF1A;</h4>
<h4 id="&#x53EF;&#x89C6;&#x5316;uvs">&#x53EF;&#x89C6;&#x5316;UVs</h4>
<p>&#x4E0B;&#x9762;&#x7684;&#x4F8B;&#x5B50;&#x4F7F;&#x7528;&#x7684;&#x7740;&#x8272;&#x5668;&#x9876;&#x70B9;&#x4F4D;&#x7F6E;&#x548C;&#x7B2C;&#x4E00;&#x7EB9;&#x7406;&#x5750;&#x6807;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#x8F93;&#x5165;&#xFF08;&#x7ED3;&#x6784;&#x6570;&#x636E;&#x7684;&#x5B9A;&#x4E49;&#xFF09;&#x3002;&#x8FD9;&#x662F;&#x975E;&#x5E38;&#x6709;&#x7528;&#x7684;&#x8C03;&#x8BD5;UV&#x5750;&#x6807;&#x7684;&#x7F51;&#x683C;&#x3002;UV&#x5750;&#x6807;&#x663E;&#x793A;&#x4E3A;&#x7EA2;&#x8272;&#x548C;&#x7EFF;&#x8272;&#x7684;&#x989C;&#x8272;&#xFF0C;&#x548C;0&#x3002;1&#x7684;&#x8303;&#x56F4;&#x4E4B;&#x5916;&#x7684;&#x5750;&#x6807;&#x6709;&#x66F4;&#x591A;&#x7684;&#x84DD;&#x8272;&#x8272;&#x8C03;&#x5E94;&#x7528;&#x3002;</p>
<pre><code class="lang-javascript">    Shader &quot;Debug/UV 1&quot; {
        SubShader {
            Pass {
                Fog { Mode Off }
                CGPROGRAM

                #pragma vertex vert
                #pragma fragment frag

                // vertex input: position, UV
                struct appdata {
                    float4 vertex : POSITION;
                    float4 texcoord : TEXCOORD0;
                };

                struct v2f {
                    float4 pos : SV_POSITION;
                    float4 uv : TEXCOORD0;
                };

                v2f vert (appdata v) {
                    v2f o;
                    o.pos = mul( UNITY_MATRIX_MVP, v.vertex );
                    o.uv = float4( v.texcoord.xy, 0, 0 );
                    return o;
                }

                half4 frag( v2f i ) : SV_Target {
                    half4 c = frac( i.uv );
                    if (any(saturate(i.uv) - i.uv))
                        c.b = 0.5;
                    return c;
                }
                ENDCG
            }
        }
    }
</code></pre>
<p>&#xFFFC;
<img src="../assets/SL-DebugUV1.png" alt=""></p>
<p>Debug UV1 shader applied to a torus knot model</p>
<p>&#x540C;&#x6837;,&#x8FD9;&#x6750;&#x8D28;vizualizes&#x7B2C;&#x4E8C;UV&#x96C6;&#x7684;&#x6A21;&#x578B;:</p>
<pre><code class="lang-javascript">
    Shader &quot;Debug/UV 2&quot; {
        SubShader {
            Pass {
                Fog { Mode Off }
                CGPROGRAM

                #pragma vertex vert
                #pragma fragment frag

                // vertex input: position, second UV
                struct appdata {
                    float4 vertex : POSITION;
                    float4 texcoord1 : TEXCOORD1;
                };

                struct v2f {
                    float4 pos : SV_POSITION;
                    float4 uv : TEXCOORD0;
                };

                v2f vert (appdata v) {
                    v2f o;
                    o.pos = mul( UNITY_MATRIX_MVP, v.vertex );
                    o.uv = float4( v.texcoord1.xy, 0, 0 );
                    return o;
                }

                half4 frag( v2f i ) : SV_Target {
                    half4 c = frac( i.uv );
                    if (any(saturate(i.uv) - i.uv))
                        c.b = 0.5;
                    return c;
                }
                ENDCG
            }
        }
    }
</code></pre>
<h4 id="&#x53EF;&#x89C6;&#x5316;&#x9876;&#x70B9;&#x989C;&#x8272;">&#x53EF;&#x89C6;&#x5316;&#x9876;&#x70B9;&#x989C;&#x8272;</h4>
<p>&#x4EE5;&#x4E0B;&#x7740;&#x8272;&#x5668;&#x4F7F;&#x7528;&#x9876;&#x70B9;&#x4F4D;&#x7F6E;&#x548C;&#x6BCF;&#x4E2A;&#x9876;&#x70B9;&#x7684;&#x989C;&#x8272;&#x4F5C;&#x4E3A;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#x7684;&#x8F93;&#x5165;&#xFF08;&#x7ED3;&#x6784;&#x6570;&#x636E;&#x7684;&#x5B9A;&#x4E49;&#xFF09;&#x3002;</p>
<pre><code class="lang-javascript">
    Shader &quot;Debug/Vertex color&quot; {
        SubShader {
            Pass {
                Fog { Mode Off }
                CGPROGRAM

                #pragma vertex vert
                #pragma fragment frag

                // vertex input: position, color
                struct appdata {
                    float4 vertex : POSITION;
                    fixed4 color : COLOR;
                };

                struct v2f {
                    float4 pos : SV_POSITION;
                    fixed4 color : COLOR;
                };

                v2f vert (appdata v) {
                    v2f o;
                    o.pos = mul( UNITY_MATRIX_MVP, v.vertex );
                    o.color = v.color;
                    return o;
                }

                fixed4 frag (v2f i) : SV_Target { return i.color; }
                ENDCG
            }
        }
    }
</code></pre>
<p>&#xFFFC;
<img src="../assets/SL-DebugColors.png" alt=""></p>
<h4 id="&#x53EF;&#x89C6;&#x5316;&#x6CD5;&#x7EBF;">&#x53EF;&#x89C6;&#x5316;&#x6CD5;&#x7EBF;</h4>
<p>&#x4EE5;&#x4E0B;&#x7740;&#x8272;&#x5668;&#x4F7F;&#x7528;&#x9876;&#x70B9;&#x4F4D;&#x7F6E;&#x548C;&#x6CD5;&#x7EBF;&#x4F5C;&#x4E3A;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#x7684;&#x8F93;&#x5165;&#xFF08;&#x7ED3;&#x6784;&#x6570;&#x636E;&#x7684;&#x5B9A;&#x4E49;&#xFF09;&#x3002;&#x6B63;&#x5E38;&#x7684;X&#xFF0C;Y&#xFF0C;Z&#x7EC4;&#x4EF6;&#x53EF;&#x89C6;&#x4E3A;R&#xFF0C;G&#xFF0C;B&#x989C;&#x8272;&#x3002;&#x56E0;&#x4E3A;&#x6B63;&#x5E38;&#x7684;&#x7EC4;&#x4EF6;&#x662F;&#x5728;&#x2013;1&#x3002;1&#x7684;&#x8303;&#x56F4;&#x5185;&#xFF0C;&#x6211;&#x4EEC;&#x7684;&#x5C3A;&#x5EA6;&#x548C;&#x504F;&#x5DEE;&#xFF0C;&#x8F93;&#x51FA;&#x7684;&#x989C;&#x8272;&#x90FD;&#x5728;&#x663E;&#x793A;0&#x3002;1&#x8303;&#x56F4;&#x3002;</p>
<p>```javascript</p>
<pre><code>Shader &quot;Debug/Normals&quot; {
    SubShader {
        Pass {
            Fog { Mode Off }

            CGPROGRAM
            #pragma vertex vert
            #pragma fragment frag

            // vertex input: position, normal
            struct appdata {
                float4 vertex : POSITION;
                float3 normal : NORMAL;
            };

            struct v2f {
                float4 pos : SV_POSITION;
                fixed4 color : COLOR;
            };

            v2f vert (appdata v) {
                v2f o;
                o.pos = mul( UNITY_MATRIX_MVP, v.vertex );
                o.color.xyz = v.normal * 0.5 + 0.5;
                o.color.w = 1.0;
                return o;
            }

            fixed4 frag (v2f i) : SV_Target { return i.color; }
            ENDCG
        }
    }
}
</code></pre><p>```&#xFFFC;</p>
<p><img src="../assets/SL-DebugNormals.png" alt=""></p>
<p>&#x8C03;&#x8BD5;&#x6CD5;&#x7EBF;&#x6750;&#x8D28;&#x5E94;&#x7528;&#x5230;&#x4E00;&#x4E2A;&#x6A21;&#x578B;&#x3002;&#x60A8;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x6A21;&#x578B;&#x786C;&#x9634;&#x5F71;&#x8FB9;&#x7F18;&#x3002;</p>
<h4 id="&#x53EF;&#x89C6;&#x5316;&#x5207;&#x7EBF;&#x548C;&#x526F;&#x6CD5;&#x7EBF;">&#x53EF;&#x89C6;&#x5316;&#x5207;&#x7EBF;&#x548C;&#x526F;&#x6CD5;&#x7EBF;</h4>
<p>&#x5207;&#x7EBF;&#x548C;&#x526F;&#x6CD5;&#x7EBF;&#x5411;&#x91CF;&#x7528;&#x4E8E;&#x6CD5;&#x7EBF;&#x8D34;&#x56FE;&#x3002;&#x5728;Unity&#x53EA;&#x6709;&#x5207;&#x5411;&#x91CF;&#x5B58;&#x50A8;&#x5728;&#x9876;&#x70B9;,&#x548C;&#x526F;&#x6CD5;&#x7EBF;&#x6765;&#x6E90;&#x4E8E;&#x6B63;&#x5E38;&#x548C;&#x5207;&#x3002;</p>
<p>The following shader uses vertex position and tangent as vertex shader input (defined in structure appdata). Tangent&#x2019;s X,Y,Z components are visualized as R,G,B colors. Because the normal components are in &#x2013;1..1 range, we scale and bias them so that the output colors are in displayable 0..1 range.
&#x4EE5;&#x4E0B;&#x6750;&#x8D28;&#x4F7F;&#x7528;&#x9876;&#x70B9;&#x4F4D;&#x7F6E;&#x548C;&#x5207;&#x4F5C;&#x4E3A;&#x9876;&#x70B9;&#x7740;&#x8272;&#x5668;&#x8F93;&#x5165;(&#x5728;&#x7ED3;&#x6784;appdata&#x5B9A;&#x4E49;)&#x3002;&#x5207;&#x7684;X,Y,Z&#x7EC4;&#x4EF6;&#x53EF;&#x89C6;&#x5316;&#x4E3A;R,G,B&#x7684;&#x989C;&#x8272;&#x3002;&#x56E0;&#x4E3A;&#x6B63;&#x5E38;&#x7684;&#x7EC4;&#x4EF6;&#x5728;&#xFF0D;1 . .1&#x8303;&#x56F4;&#x5185;,&#x6211;&#x4EEC;&#x7684;&#x89C4;&#x6A21;&#x548C;&#x504F;&#x89C1;,&#x8FD9;&#x6837;&#x8F93;&#x51FA;&#x989C;&#x8272;&#x662F;&#x53EF;&#x663E;&#x793A;&#x7684;0 . .1&#x8303;&#x56F4;&#x3002;</p>
<p>Shader &quot;Debug/Tangents&quot; {
SubShader {
    Pass {
        Fog { Mode Off }
        CGPROGRAM</p>
<pre><code>    #pragma vertex vert
    #pragma fragment frag

    // vertex input: position, tangent
    struct appdata {
        float4 vertex : POSITION;
        float4 tangent : TANGENT;
    };

    struct v2f {
        float4 pos : SV_POSITION;
        fixed4 color : COLOR;
    };

    v2f vert (appdata v) {
        v2f o;
        o.pos = mul( UNITY_MATRIX_MVP, v.vertex );
        o.color = v.tangent * 0.5 + 0.5;
        return o;
    }

    fixed4 frag (v2f i) : SV_Target { return i.color; }
    ENDCG
}
</code></pre><p>}
}</p>
<p>&#xFFFC;<img src="../assets/SL-DebugTangents.png" alt=""></p>
<p>&#x8C03;&#x8BD5;&#x5207;&#x7EBF;&#x6750;&#x8D28;&#x5E94;&#x7528;&#x5230;&#x4E00;&#x4E2A;&#x6A21;&#x578B;&#x3002;</p>
<p>The following shader visualizes binormals. It uses vertex position, normal and tangent as vertex input. Binormal is calculated from normal and tangent. Just like normal or tangent, it needs to be scaled and biased into a displayable 0..1 range.
&#x4EE5;&#x4E0B;&#x6750;&#x8D28;&#x53EF;&#x89C6;&#x5316;&#x526F;&#x6CD5;&#x7EBF;&#x3002;&#x5B83;&#x4F7F;&#x7528;&#x9876;&#x70B9;&#x4F4D;&#x7F6E;,&#x6B63;&#x5E38;&#x548C;&#x5207;&#x9876;&#x70B9;&#x8F93;&#x5165;&#x3002;&#x4ECE;&#x6B63;&#x5E38;&#x548C;&#x5207;&#x526F;&#x6CD5;&#x7EBF;&#x8BA1;&#x7B97;&#x3002;&#x5C31;&#x50CF;&#x6B63;&#x5E38;&#x6216;&#x5207;&#x7EBF;,&#x5B83;&#x9700;&#x8981;&#x6269;&#x5C55;&#x548C;&#x504F;&#x89C1;&#x5230;&#x4E00;&#x4E2A;&#x53EF;&#x663E;&#x793A;&#x7684;0 . .1&#x8303;&#x56F4;&#x3002;</p>
<p>Shader &quot;Debug/Binormals&quot; {
SubShader {
    Pass {
        Fog { Mode Off }
        CGPROGRAM</p>
<pre><code>    #pragma vertex vert
    #pragma fragment frag

    // vertex input: position, normal, tangent
    struct appdata {
        float4 vertex : POSITION;
        float3 normal : NORMAL;
        float4 tangent : TANGENT;
    };

    struct v2f {
        float4 pos : SV_POSITION;
        float4 color : COLOR;
    };

    v2f vert (appdata v) {
        v2f o;
        o.pos = mul( UNITY_MATRIX_MVP, v.vertex );
        // calculate binormal
        float3 binormal = cross( v.normal, v.tangent.xyz ) * v.tangent.w;
        o.color.xyz = binormal * 0.5 + 0.5;
        o.color.w = 1.0;
        return o;
    }

    fixed4 frag (v2f i) : SV_Target { return i.color; }
    ENDCG
}
</code></pre><p>}
}</p>
<p>&#xFFFC;<img src="../assets/SL-DebugBinormals.png" alt=""></p>
<p>&#x8C03;&#x8BD5;&#x526F;&#x6CD5;&#x7EBF;&#x6750;&#x8D28;&#x5E94;&#x7528;&#x5230;&#x4E00;&#x4E2A;&#x6A21;&#x578B;&#x3002;&#x6F02;&#x4EAE;!</p>

                                
                                </section>
                            
                        </div>
                    </div>
                
            </div>

            
                
                <a href="13-在-cghlsl-中访问-shader-属性.html" class="navigation navigation-prev " aria-label="Previous page: 1.3 在 Cg\/HLSL 中访问着色器属性">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="15-内置-shader-包含的文件.html" class="navigation navigation-next " aria-label="Next page: 1.5 内置 Shader 包含的文件">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"1.4 为顶点程序提供顶点数据","level":"1.2.2.4","depth":3,"next":{"title":"1.5 内置 Shader 包含的文件","level":"1.2.2.5","depth":3,"path":"1. ShaderLab 框架/15-内置-shader-包含的文件.md","ref":"1. ShaderLab 框架/15-内置-shader-包含的文件.md","articles":[]},"previous":{"title":"1.3 在 Cg\\/HLSL 中访问着色器属性","level":"1.2.2.3","depth":3,"path":"1. ShaderLab 框架/13-在-cghlsl-中访问-shader-属性.md","ref":"1. ShaderLab 框架/13-在-cghlsl-中访问-shader-属性.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-search","livereload"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"fontsettings":{"theme":"white","family":"sans","size":2},"livereload":{},"highlight":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","dirction":"沈军","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"ShaderLab 开发实战","language":"zh-cn","gitbook":">=2.0.0","description":"Cg语法及ShaderLab开发实战"},"file":{"path":"1. ShaderLab 框架/14-为顶点程序提供顶点数据.md","mtime":"2016-12-24T10:03:22.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2016-12-27T15:19:41.227Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

